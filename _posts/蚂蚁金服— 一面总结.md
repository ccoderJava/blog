---
title: 蚂蚁集团—一面技术—面试总结
date: 2021-12-14 23:13:07
author: 聪聪
category: 面试
tags:
  - 蚂蚁金服
  - 面试总结
  - 技术总结
---

## 1.支付公司和银行之间清结算流程是怎样的

## 2.如何保证银行清结算文件可信,如何确保不被篡改

## 3.Redis的分布式锁

## 4.Redis的“一主二从三哨兵”

## 5.如何不用db、redis、zk解决分布式锁

### 5.1 Map本地高可用缓存

### 5.2 Map缓存扩展到分布式如何保证数据一致性和高可用

### 5.3 Map缓存分布式如何扩容、一致性哈希、虚拟node等实施方案

### 5.4 Map缓存宕机重启数据持久化磁盘(RDB、AOF)时,你会如何实现

## 6.Redis主从同步和cluster

## 7.ConcurrentHashMap用到了哪些锁

## 8.HashMap的数据扩容迁移

## 9.如何设计去中心化存储(分布式缓存存储)

## 10.RabbitMQ 如何实现分布式事务

## 11.分布式事务中的2PC和TCC

## 12.简单介绍一下RabbitMQ的Push和Pull模式
### Push
+ 服务端主动推送消息给客户端,及时性较高.
+ 若客户端处理能力较弱时会产生消息堆积、处理缓慢、甚至于崩溃。
+ 避免该情况产生，需要根据客户端消费能力做流控(rabbitMQ-Qos).
+ 服务端需要维护每次推送消息的状态，推送失败后需要进行重试。
### pull
+ 客户端可根据自身性能进行消费。
+ 数据传输失败时消息不会丢失,只需客户端重新从服务端进行拉取即可。
+ 确保客户端主动到服务端拉取消息的时间间隔设置合适，避免高频拉取对服务端造成压力。间隔时间过长会造成数据延迟和堆积。

### 不同业务场景选择
+ 服务端消息过大,客户端对消息处理逻辑流程复杂,消费性能较弱时可选择pull模式。
+ 对于数据实时性要求较高时，可采用push进行实时推送。



## 13.索引如何使用的

### 13.1 索引失效
+ MySQL引擎结算全表扫描更快
+ Where中存在函数
+ Where中索引列存在运算
+ 需要类型转换时
+ 联合索引时未使用左字段(联合索引最左原则)
+ 使用like关键字时 第一个字符`%`开始索引失效
+ 使用or时必须两边字段全有索引


## 14.索引下推和索引覆盖
> + [索引覆盖和索引覆盖](https://www.jianshu.com/p/bdc9e57ccf8b)

当sql语句`select password from table where username = 'cong'` 的所求查询字段（select列）和查询条件字段（where子句）全都包含在一个索引`(username,password)`中，可以直接使用索引查询而不需要回表。这就是**覆盖索引**，通过使用覆盖索引，可以减少搜索树的次数，是常用的性能优化手段。

+ 联合索引最左原则: 联合索引的多个字段中，只有当查询条件为联合索引的一个字段时，查询才能使用该索引。
+ 索引可以用于查询条件字段为索引字段，根据字段值最左若干个字符进行的模糊查询。`username like %cong`

+ 需要回表查询的全行数据比较少，这就是mysql的索引下推。